<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Rogdham" /><link rel="canonical" href="https://sdkite.rogdham.net/http_replay/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Record & replay - SDKite</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Record \u0026 replay";
        var mkdocs_page_input_path = "http_replay.md";
        var mkdocs_page_url = "/http_replay/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> SDKite
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">User guide</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../quickstart/">Quickstart</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pagination/">Pagination</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../typing/">Typing</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">HTTP client</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../http_request/">Request</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../http_response/">Response</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../http_auth/">Authentication</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../http_engine/">Engine</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Record & replay</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#engine-parameters">Engine parameters</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#example">Example</a>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">External Links</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="https://github.com/rogdham/sdkite/blob/master/CHANGELOG.md">Changelog</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/rogdham/sdkite/issues">Issue tracker</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/rogdham/sdkite">SDKite @ GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://pypi.org/project/sdkite">SDKite @ PyPI</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">SDKite</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
          <li>HTTP client &raquo;</li>
      <li>Record & replay</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/rogdham/sdkite/blob/master/docs/src/http_replay.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="http-replay-engine">HTTP replay engine</h1>
<p>Record and replay the HTTP interactions by setting the <a href="../http_engine/">HTTP engine</a> to
<code>HTTPEngineReplay</code>. This is useful for fast and deterministic tests.</p>
<p>Inspired by <a href="https://github.com/myronmarston/vcr">VCR</a> for Ruby and the similar projects
for Python.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This feature is experimental, and the format in which records are saved on disk is subject to change in future versions.</p>
</div>
<h2 id="engine-parameters">Engine parameters</h2>
<dl>
<dt><code>paths</code></dt>
<dd>
<p>An iterable of <code>Path</code>s to specify the record stores. If a request matches a record
from several paths, the last one will be used.</p>
</dd>
<dt><code>recording</code> (optional)</dt>
<dd>
<p>A <code>bool</code> telling wether real HTTP requests will be send (and saved) instead of loaded
from an existing record. Otherwise, no HTTP requests will be sent at all, and exceptions
will be raised if no matching requests are found in the record store.</p>
</dd>
<dt><code>replay_request_modifier</code> (optional)</dt>
<dd>
<p>Allow to modify the request before looking it up in the record store.</p>
</dd>
<dt><code>replay_response_modifier</code> (optional)</dt>
<dd>
<p>Allow to modify the response after retrieving it from the record store.</p>
</dd>
<dt><code>recording_request_modifier</code> (optional)</dt>
<dd>
<p>Allow to modify the request before sending the HTTP interaction for real. Only used in
recording mode. Note that the argument has not been modified by
<code>replay_request_modifier</code>.</p>
</dd>
<dt><code>recording_response_modifier</code> (optional)</dt>
<dd>
<p>Allow to modify the response received from a real HTTP interaction before saving it to
the record store. Only used in recording mode. Note that after being saved, the returned
value will then pass through <code>replay_response_modifier</code> before being sent to the caller.</p>
</dd>
<dt><code>recording_compute_basename</code> (optional)</dt>
<dd>
<p>Allow to compute the base name of the record file to be saved. A <code>.json</code> extension
will be appended to the returned value. Only used in recording mode.</p>
</dd>
</dl>
<h2 id="example">Example</h2>
<pre class="codehilite"><code class="language-python">&gt;&gt;&gt; from sdkite import Client
&gt;&gt;&gt; from sdkite.http import HTTPAdapterSpec
&gt;&gt;&gt; from sdkite.http.engine_replay import HTTPEngineReplay

&gt;&gt;&gt; class TableTennis(Client):
...     _http = HTTPAdapterSpec(&quot;https://api.example.com/&quot;)
...
...     def ping(self):
...         return self._http.get(&quot;ping&quot;).data_str

&gt;&gt;&gt; TableTennis._http.set_engine(HTTPEngineReplay, [Path(&quot;replay&quot;)])

&gt;&gt;&gt; table_tennis = TableTennis()

&gt;&gt;&gt; table_tennis.ping()
'pong'
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../http_engine/" class="btn btn-neutral float-left" title="Engine"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rogdham/sdkite" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../http_engine/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
